# Netlify configuration for mobile app deployment

[build]
  # Build command
  command = "cd mobile && npm install && npx expo export:web"

  # Publish directory (where the built files are)
  publish = "mobile/dist"

  # Set NODE_VERSION
  environment = { NODE_VERSION = "18" }

# Environment variables for Firebase configuration
# These must be set in Netlify UI: Site settings > Environment variables
# Or uncomment and add the actual values here (but DON'T commit sensitive data!)

# Production environment variables
[context.production.environment]
  EXPO_PUBLIC_FIREBASE_API_KEY = "AIzaSyA0TZAIuYoiTG8Q1VzK5wKb6C12K67DClo"
  EXPO_PUBLIC_FIREBASE_AUTH_DOMAIN = "intentional-movement-corp.firebaseapp.com"
  EXPO_PUBLIC_FIREBASE_PROJECT_ID = "intentional-movement-corp"
  EXPO_PUBLIC_FIREBASE_STORAGE_BUCKET = "intentional-movement-corp.firebasestorage.app"
  EXPO_PUBLIC_FIREBASE_MESSAGING_SENDER_ID = "528044070931"
  EXPO_PUBLIC_FIREBASE_APP_ID = "1:528044070931:web:dafa368852b5549c6947e6"
  EXPO_PUBLIC_GOOGLE_WEB_CLIENT_ID = "528044070931-06pbpg4gj40daopug4b7plumibn3g353.apps.googleusercontent.com"
  EXPO_PUBLIC_API_URL = "https://intentionalmovement-production.up.railway.app/api"
  EXPO_PUBLIC_SOCKET_URL = "https://intentionalmovement-production.up.railway.app"
  EXPO_PUBLIC_STRIPE_PUBLISHABLE_KEY = "pk_test_51SFT2r4298bLnbuDmY5O8MA8sEI7QyZsCQqaECDSPpO4jHiMVcqPcm4rc4T1MfAU94UJAgpYd3kWxCkA45QmJfqH00qepkmx6e"

# Headers for security and CORS
[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-Content-Type-Options = "nosniff"
    Referrer-Policy = "strict-origin-when-cross-origin"
    Permissions-Policy = "geolocation=(), microphone=(), camera=()"

# Redirects for SPA (single-page application)
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
